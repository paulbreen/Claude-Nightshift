services:
  claude-worker:
    build: .
    container_name: claude-task-runner
    restart: on-failure:3
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
    volumes:
      - ./data:/data
      - ./config.yaml:/app/config.yaml:ro
      - ./work:/work
      - claude-auth:/home/claude/.claude
volumes:
  claude-auth:
    # Optional: limit resources
    # deploy:
    #   resources:
    #     limits:
    #       cpus: '2.0'
    #       memory: 4G
